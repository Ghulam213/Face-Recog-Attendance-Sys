import os
import time
import face_recognition
import pickle
import os

my_dir = 'D:\Documents\FRAttendanceSystem\images/' # Folder where all your image files reside. Ensure it ends with '/

encodings = [] # Create an empty list for saving encoded files
for i in os.listdir(my_dir): # Loop over the folder to list individual files
    image = my_dir + i
    image = face_recognition.load_image_file(image) # Run your load command
    image_encoding = face_recognition.face_encodings(image) # Run your encoding command
    encodings.append(image_encoding[0]) # Append the results to encoding_for_file list


with open('pickled_encodings2.pkl', 'wb') as pickle_file:
    pickle.dump(encodings, pickle_file)

# with open('pickled_encodings2.pkl', 'rb') as pickle_file:
#     new_encodings = pickle.load(pickle_file)
